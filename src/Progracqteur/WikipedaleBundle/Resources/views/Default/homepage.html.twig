{% extends "ProgracqteurWikipedaleBundle::layout.html.twig" %}

{% block body %}

{% if (app.session.get('city')) and (app.session.get('city_center')) %}
<script language="javascript"> 
  <!--
      $(document).ready(function(){
          homepageMap('{{ app.session.get('city') }}', {{app.session.get('city_center').lon}}, {{app.session.get('city_center').lat}},
				     displayPlaceDataFunction);
	  });
  // -->
</script>
<div id="olPanelUL"></div>

<div id="PanelUR">
  <div id="ButtonInfo" class="ButtonGeneral" onClick="javascript:blopFunction()">Info</div>
  <div id="ButtonAide" class="ButtonGeneral" onClick="javascript:blopFunction()">Aide</div>
  <div id="ButtonConnexion" class="ButtonGeneral" onClick="javascript:blopFunction()">Connexion</div>
</div>

<div id="MapAndEditorContener">
  <div id="map" style="width:400px; height:200px; float:left;"  class="smallmap"></div>

  <div style="width:600px; height:300px; float:left; overflow:auto;background: gray;">

    <div id="div_signaler" style="margin-left:15px;display:none;background: white;">
      <h1>Signaler un point noir.</h1>
      <strong>Pour des petits travaux et des travaux d'entretien, vous pouvez contacter directement la ville via le num&eacute;ro gratuit 0800 92 329 ou via <a href="mailto:travaux.vert@ville.mons.be">travaux.vert@ville.mons.be</a> (<a href="http://www.mons.be/default.aspx?GUID={BF4FA10D-9842-11DA-9742-0002A58CB319}&LNG=FRA" target="_blank">mons.be</a>)
      </strong>.
      <br />
      <br />
      Cliquez sur la carte pour indiquer la position du point noir et remplissez le formulaire suivant.<br /><br />
      <form method="post" action="javascript:catchPlaceForm('#new_placeForm')" id="new_placeForm">
        <input type="hidden"  name="lon" readonly="true" />
        <input  type="hidden" name="lat" readonly="true" />
        <label for="l">Lieu : </label> <input name="lieu" id="l" size=42 /><br />
        <label for="d">Description:</label> <textarea name="description" id="d" cols=35 rows=5></textarea><br />
        <br />
        <label for="n">Nom, prénom: </label> <input name="user_label" id="n" size=42 /><br />
        <br />
        <label for="e">Email:</label> <input name="email" id="e"  size=42 /><br />
        <br />
        <div style="padding-left:100px"><input type="submit" value="soumettre"></div>
      </form>
      <br />
      <b>Aide :</b>
      <ul>
        <li>Un point noir est quelque chose qui pose probl&egrave;me &agrave; la pratique id&eacute;ale du v&eacute;lo ;  
            ça peut &ecirc;tre une bordure non abaiss&eacute;e, une piste cyclable mal entretenue, un feu mal synchronis&eacute;, ...
        <li>Pour nous signaler un point noir, indiquez sur la carte o&ugrave; se trouve ce point noir, remplissez le formulaire et cliquez sur "soumettre". Merci.
      </ul>                   
    </div>

    <div id="div_placeDetails" style="margin-left:15px;display:none;background: white;"> 
      <h1>D&eacute;tails du point noir <span class="span_id"></span></h1>	
      <strong>Lieu</strong> : <strong>TODO</strong><br />
      <strong>Description</strong> : <span id="span_description"></span><br />
      <strong>Nbr. de commentaires</strong> : <span class="span_nbComm"></span><br />
      <strong>Nbr. de votes</strong> : <span class="span_nbVote"></span><br />
      <strong>Cr&eacute;ateur</strong> : <span class="span_creator"></span><br />
    </div>

    <div id="div_placeEdit" style="margin-left:15px;display:none;background: white;"> 
      <center><h1>&Eacute;dition - point noir <span class="span_id"></span></h1></center>
      <strong><a id="link_delete" href="#">Supprimer le point noir</a><strong><br />
      <strong>Nbr. de commentaires</strong> : <span class="span_nbComm"></span><br />
      <strong>Nbr. de votes</strong> : <span class="span_nbVote"></span><br />
      <strong>Cr&eacute;ateur</strong> : <span class="span_creator"></span><br />
      <br />
      <strong>Contact</strong> : <span id="span_user_label"></span><br />
      <strong>Mail</strong> : <span id="span_email"></span><br />
      <br />
      <form method="post" action="javascript:catchPlaceForm('#editForm')" name="f" id="editForm">
        <input type ="hidden" value="" id="f_id" name="id" />
        <p class="p_form">
          <label for="f_lieu" class="label_aligne"><strong>Lieu</ strong> : </label> 
          <input name="lieu"  id="f_lieu" size=42 />
        </p>
        <p class="p_form">
          <label for="f_description" class="label_aligne"><strong>Description</strong> :</label>
          <textarea name="description" id="f_description" cols=35 rows=5></textarea>
        </p>
        <p class="p_form">
          <label for="c" class="label_aligne"><strong>Couleur</strong> :</label>
          <select name="couleur" id="c">
            <option id="white" value="white" >Blanc</option>
            <option id="red" value="red">Rouge</option>
            <option id="yellow" value="yellow">Jaune</option>
            <option id="green" value="green">Vert</option>
          </select>
        </p>
        <p class="p_form" id="message_erreur" style="display:none">
          <span style="margin-left:100px; background-color:red;">Veuillez vous <a href="connexion.php" target="_blank">connecter</a> pour enregistrer la modification.</span>
        </p>
        <p class="p_form">
          <span style="padding-left:100px;"><input type="submit" value="&Eacute;diter"></span>
        </p>
      </form>
    </div>

  </div>
</div>
{% else %}
<p>Veuillez choisir une ville. Merci.</p>
{% endif %}

{% endblock %}
